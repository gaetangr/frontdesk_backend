(this["webpackJsonpmaterial-app"]=this["webpackJsonpmaterial-app"]||[]).push([[30],{1263:function(e,t,n){"use strict";n.r(t);var a=n(60),i=n(2),o=n(23),c=n.n(o),r=n(37),s=n(35),l=n(25),d=n(7),u=n(11),h=n(0),p=n.n(h),j=n(659),b=n(130),g=n(668),m=n(681),x=n(972),O=n.n(x),f=n(973),C=n.n(f),y=n(309),k=(n(648),n(44)),v=n.n(k),_=n(661),w=n(642),T=n(1265),I=n(623),N=n(170),S=n(654),A=n(617),F=n(646),z=n(666),W=n(651),M=(Object(d.d)(_.a).withConfig({displayName:"Chat__Breadcrumbs",componentId:"sc-15usst0-0"})(W.b),Object(d.d)(w.a).withConfig({displayName:"Chat__Divider",componentId:"sc-15usst0-1"})(W.b)),D=(Object(d.d)(T.a).withConfig({displayName:"Chat__TextField",componentId:"sc-15usst0-2"})(W.b),Object(d.d)(I.a).withConfig({displayName:"Chat__ChatContainer",componentId:"sc-15usst0-3"})(["width:120%;height:100%;"]));Object(d.d)(I.a).withConfig({displayName:"Chat__ChatSidebar",componentId:"sc-15usst0-4"})(["border-right:1px solid ",";"],(function(e){return e.theme.palette.divider})),Object(d.d)(I.a).withConfig({displayName:"Chat__ChatMain",componentId:"sc-15usst0-5"})([""]),d.d.div.withConfig({displayName:"Chat__ChatMessages",componentId:"sc-15usst0-6"})(["overflow-y:scroll;height:calc(65vh - 94px);"]),d.d.div.withConfig({displayName:"Chat__ChatMessage",componentId:"sc-15usst0-7"})(["margin:30px;text-align:",";"],(function(e){return e.position})),d.d.div.withConfig({displayName:"Chat__ChatMessageInner",componentId:"sc-15usst0-8"})(["display:inline-block;"]),Object(d.d)(N.a).withConfig({displayName:"Chat__ChatMessageTime",componentId:"sc-15usst0-9"})(["text-align:right;opacity:0.8;"]),Object(d.d)(S.a).withConfig({displayName:"Chat__ChatMessageAvatar",componentId:"sc-15usst0-10"})(["position:relative;display:inline-block;width:34px;height:34px;margin-right:","px;"],(function(e){return e.theme.spacing(2)})),d.d.div.withConfig({displayName:"Chat__ChatMessageBubble",componentId:"sc-15usst0-11"})(["display:inline-block;margin-right:auto;background:",";color:",";border-radius:3px;padding:","px;margin-bottom:","px;",";"],(function(e){return e.highlighted?e.theme.palette.secondary.main:e.theme.palette.action.hover}),(function(e){return e.highlighted?e.theme.palette.common.white:e.theme.palette.text.primary}),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.shadows[1]})),Object(d.d)(N.a).withConfig({displayName:"Chat__ChatMessageBubbleName",componentId:"sc-15usst0-12"})(["font-weight:",";"],(function(e){return e.theme.typography.fontWeightBold})),Object(d.d)(I.a).withConfig({displayName:"Chat__ChatInput",componentId:"sc-15usst0-13"})(["min-height:94px;padding:","px;"],(function(e){return e.theme.spacing(5)})),Object(d.d)(A.a).withConfig({displayName:"Chat__Online",componentId:"sc-15usst0-14"})(["margin-right:","px;span{background-color:",";border:1.5px solid ",";height:12px;width:12px;border-radius:50%;}"],(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.sidebar.footer.online.background}),(function(e){return e.theme.palette.common.white}));function B(){var e=Object(h.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(h.useState)([]),l=Object(s.a)(o,2),d=l[0],p=l[1],j=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:"".concat(u.k,"/comment/"),headers:{Authorization:"Token ".concat(u.o)}});case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(h.useEffect)((function(){j()}),[]),Object(h.useEffect)((function(){p(n)}),[n]);var b=d.map((function(e){return Object(i.jsx)("li",{children:e.content})}));return Object(i.jsx)(D,{container:!0,component:z.a,children:b})}var V=function(){return Object(i.jsxs)(p.a.Fragment,{children:[Object(i.jsx)(M,{my:6}),Object(i.jsx)(B,{})]})},E=(n(6),n(618)),P=n(622),R=n(1233),q=n(1234),J=n(164),L=n(168),K=n(674),U=n(728),G=n(704),H=n(633),Q=n(634),X=n(683);var Y=Object(E.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},orange:{color:e.palette.getContrastText(R.a[500]),backgroundColor:R.a[500]},purple:{color:e.palette.getContrastText(q.a[500]),backgroundColor:q.a[500]},green:{color:e.palette.getContrastText(J.a[500]),backgroundColor:J.a[500]},blue:{color:e.palette.getContrastText(L.a[500]),backgroundColor:L.a[500]},small:{width:e.spacing(3),height:e.spacing(3)}}})),Z=Object(d.d)(z.a).withConfig({displayName:"WorkspaceContent__Card",componentId:"sc-12kamiw-0"})(W.b),$=Object(d.d)(w.a).withConfig({displayName:"WorkspaceContent__Divider",componentId:"sc-12kamiw-1"})(W.b);var ee=function(e){var t,n=p.a.useState(!1),a=Object(s.a)(n,2),o=(a[0],a[1],p.a.useState(!1)),c=Object(s.a)(o,2),r=c[0],l=(c[1],Object(h.useState)("")),d=Object(s.a)(l,2),u=(d[0],d[1],Object(h.useState)("success")),j=Object(s.a)(u,2),b=(j[0],j[1],Y());return Object(i.jsxs)(Z,{mb:6,children:[e.progress,Object(i.jsxs)(K.a,{children:[Object(i.jsxs)(F.a,{display:"flex",children:[Object(i.jsx)(I.a,{container:!0,justify:"flex-start",children:Object(i.jsx)(I.a,{item:!0,children:e.category})}),Object(i.jsxs)(I.a,{container:!0,justify:"flex-end",children:[Object(i.jsxs)(I.a,{item:!0,xl:"auto",children:[" ",e.status,e.pinned]}),Object(i.jsx)(U.a,{align:"right"})]})]}),Object(i.jsx)(G.a,{avatar:Object(i.jsx)(S.a,{className:b.purple,children:(t=e.name,t.slice(0,2))}),action:Object(i.jsx)(H.a,{"aria-label":"settings"}),title:"".concat(e.name," - ").concat(e.title),subheader:e.created}),Object(i.jsx)($,{mb:3}),Object(i.jsx)(N.a,{gutterBottom:!0,children:e.message})]}),Object(i.jsxs)(F.a,{mt:4,ml:4,mb:3,display:"flex",children:[Object(i.jsx)(I.a,{container:!0,justify:"flex-start",children:Object(i.jsxs)(I.a,{item:!0,children:[" ",Object(i.jsx)(Q.a,{onClick:e.linkDone,size:"small",color:"secondary",children:Object(i.jsx)(X.a,{children:"Marquer comme fait"})}),Object(i.jsx)(Q.a,{onClick:e.linkPinned,size:"small",color:"secondary",children:"Epingler"})]})}),Object(i.jsxs)(I.a,{container:!0,justify:"flex-end",children:[Object(i.jsxs)(I.a,{item:!0,xl:"auto",children:[" ",Object(i.jsx)(Q.a,{onClick:e.linkDelete,size:"small",color:"secondary",children:Object(i.jsx)(X.a,{children:"Supprimer"})})]}),Object(i.jsx)(U.a,{align:"left"})]})]}),Object(i.jsx)(P.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(i.jsx)(K.a,{children:Object(i.jsx)(N.a,{children:Object(i.jsx)(V,{})})})})]})},te=n(582),ne=n(1256),ae=n(1260),ie=n(774),oe=n(777),ce=n(776),re=n(1235),se=n(775),le=n(626),de=n(1236),ue=n(1237),he=n(167),pe=n(655);var je=Object(d.d)(pe.a).withConfig({displayName:"Workspace__DoneChip",componentId:"ujlcbh-0"})(["background-color:",";border-radius:5px;color:",";font-size:12px;height:18px;float:right;margin-left:2px;margin-top:3px;padding:3px 0;span{padding-left:","px;padding-right:","px;}"],J.a[700],(function(e){return e.theme.palette.common.white}),(function(e){return e.theme.spacing(1.375)}),(function(e){return e.theme.spacing(1.375)})),be=Object(d.d)(pe.a).withConfig({displayName:"Workspace__PinnedChip",componentId:"ujlcbh-1"})(["background-color:",";border-radius:5px;color:",";font-size:12px;height:18px;float:right;margin-left:2px;margin-top:3px;padding:3px 0;span{padding-left:","px;padding-right:","px;}"],he.a[700],(function(e){return e.theme.palette.common.white}),(function(e){return e.theme.spacing(1.375)}),(function(e){return e.theme.spacing(1.375)})),ge=(Object(d.d)(pe.a).withConfig({displayName:"Workspace__CategoryChip",componentId:"ujlcbh-2"})(["background-color:",";border-radius:5px;color:",";font-size:12px;height:18px;float:right;margin-left:2px;margin-top:3px;padding:3px 0;span{padding-left:","px;padding-right:","px;}"],L.a[700],(function(e){return e.theme.palette.common.white}),(function(e){return e.theme.spacing(1.375)}),(function(e){return e.theme.spacing(1.375)})),Object(E.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},orange:{color:e.palette.getContrastText(R.a[500]),backgroundColor:R.a[500]},purple:{color:e.palette.getContrastText(q.a[500]),backgroundColor:q.a[500]},green:{color:e.palette.getContrastText(J.a[500]),backgroundColor:J.a[500]},blue:{color:e.palette.getContrastText(L.a[500]),backgroundColor:L.a[500]},small:{width:e.spacing(3),height:e.spacing(3)}}})),Object(d.d)(z.a).withConfig({displayName:"Workspace__Card",componentId:"ujlcbh-3"})(W.b),Object(d.d)(w.a).withConfig({displayName:"Workspace__Divider",componentId:"ujlcbh-4"})(W.b));Object(d.d)(_.a).withConfig({displayName:"Workspace__Breadcrumbs",componentId:"ujlcbh-5"})(W.b);t.default=function(){var e,t,n,o=Object(h.useState)([]),d=Object(s.a)(o,2),x=d[0],f=d[1],k=Object(h.useState)([]),_=Object(s.a)(k,2),w=_[0],S=_[1],A=Object(h.useState)(),F=Object(s.a)(A,2),z=(F[0],F[1],p.a.useState(!1)),W=Object(s.a)(z,2),M=W[0],D=W[1],B=function(){D(!1)},V=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:"".concat(u.k,"/notebook/list/"),headers:{Authorization:"Token ".concat(u.o)}});case 2:t=e.sent,f(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(h.useState)(""),P=Object(s.a)(E,2),R=P[0],q=P[1],J=Object(h.useState)("tous"),U=Object(s.a)(J,2),G=U[0],H=U[1],X=p.a.useState(""),Y=Object(s.a)(X,2),Z=Y[0];Y[1],Object(h.useEffect)((function(){V(),v()({method:"get",url:"".concat(u.k,"/users/"),headers:{Authorization:"Token ".concat(u.o)}}).then((function(e){S(e.data[0])}))}),[]);var $=m.a().shape({TextField:m.b().required("Vous n'avez rien renseign\xe9").min(1,"Trop court ").max(1e3)}),he=Object(j.c)({resolver:Object(g.yupResolver)($)}),pe=p.a.useState(""),me=Object(s.a)(pe,2),xe=me[0],Oe=me[1],fe=p.a.useState(new Date("2021-02-11")),Ce=Object(s.a)(fe,2),ye=Ce[0],ke=Ce[1],ve=(he.register,he.handleSubmit),_e=he.errors,we=he.control,Te=(he.reset,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;q(Object(i.jsx)(le.a,{variant:"query"})),setTimeout((function(){q(""),V()}),e)}),Ie=function(e){v()({method:"post",url:"".concat(u.k,"/notebook/create/"),data:{workspace:w.workspace,author:w.id,content:e.TextField,is_done:!1,is_pinned:!1,category:G},headers:{Authorization:"Token ".concat(u.o)}}).then(D(!1),Te(2e3)).catch((function(e){e.response}))},Ne=Object(i.jsxs)(ie.a,{open:M,onClose:B,"aria-labelledby":"form-dialog-title",children:[Object(i.jsx)(se.a,{id:"form-dialog-title",children:"Ajouter la consigne"}),Object(i.jsxs)(ce.a,{children:[Object(i.jsx)(re.a,{}),Object(i.jsxs)("form",{onSubmit:ve(Ie),children:[Object(i.jsx)(j.a,{as:Object(i.jsx)(T.a,{multiline:!0,rows:4,autoFocus:!0,value:"",error:!!_e.TextField,helperText:null===(e=_e.TextField)||void 0===e?void 0:e.message,variant:"outlined",label:"Votre consigne",placeholder:"Ajouter votre consigne",fullWidth:!0}),name:"TextField",control:we,defaultValue:""}),Object(i.jsx)(j.a,{as:Object(i.jsx)(te.a,{utils:y.a,children:Object(i.jsx)(ne.a,{margin:"normal",id:"date-picker-dialog",label:"Programmer la consigne",format:"dd/MM/yyyy",value:ye,onChange:function(e){ke(e)},KeyboardButtonProps:{"aria-label":"change date"}})}),name:"Date",control:we,defaultValue:""})]}),Object(i.jsxs)(oe.a,{children:[Object(i.jsxs)(Q.a,{onClick:B,color:"primary",children:["Annuler",Z]}),Object(i.jsxs)(Q.a,{onClick:ve(Ie),color:"primary",children:["Ajouter la consigne",Z]})]})]})]}),Se=x.map((function(e){if(e.category=="".concat(G))return Object(i.jsx)(ee,{name:(t=e.username,t.charAt(0).toUpperCase()+t.slice(1)),title:e.username_title,status:1==e.is_done?Object(i.jsx)(je,{label:"Fait"}):"",pinned:1==e.is_pinned?Object(i.jsx)(be,{label:"Important"}):"",message:e.content,created:e.dates,linkDelete:function(){var t;t=e.id,v()({method:"delete",url:"".concat(u.k,"/notebook/").concat(t,"/"),headers:{Authorization:"Token ".concat(u.o)}}).then(Te(2e3))},linkDone:function(){var t;t=e.id,v()({method:"patch",url:"".concat(u.k,"/notebook/").concat(t,"/"),headers:{Authorization:"Token ".concat(u.o)},data:{is_done:!0}}).then(Te(1e3))},linkPinned:function(){var t;t=e.id,v()({method:"patch",url:"".concat(u.k,"/notebook/").concat(t,"/"),headers:{Authorization:"Token ".concat(u.o)},data:{is_pinned:!0}}).then(Te(1e3))},edit:"dd"},e.id);var t})),Ae=Object(i.jsxs)("li",{Style:"list-style-type:none;",children:[" ",Object(i.jsx)("ul",{children:Object(i.jsxs)(Q.a,{onClick:function(){H("tous")},variant:"contained",color:"primary",children:[Object(i.jsx)(de.a,{style:{marginRight:8}}),"R\xe9ception"]})}),Object(i.jsx)("ul",{children:Object(i.jsxs)(Q.a,{onClick:function(){H("maintenance")},variant:"contained",color:"primary",children:[Object(i.jsx)(ue.a,{style:{marginRight:8}}),"Maintenance"]})})]}),Fe=Object(i.jsx)(ae.a,(t={id:"highlights-demo",options:x,value:xe,onChange:function(e,t){Oe(t)},groupBy:function(e){return e.dates},getOptionLabel:function(e){return e.dates},openOnFocus:"false",noOptionsText:"Consigne introuvable",openText:"Trier par date",freeSolo:!1,clearText:"Supprimer texte"},Object(a.a)(t,"getOptionLabel",(function(e){return e.content})),Object(a.a)(t,"fullWidth",!0),Object(a.a)(t,"renderInput",(function(e){return Object(i.jsx)(T.a,Object(l.a)(Object(l.a)({},e),{},{label:"Chercher une consigne",variant:"outlined"}))})),Object(a.a)(t,"renderOption",(function(e,t){var n=t.inputValue,a=C()(e.content,n),o=O()(e.content,a);return Object(i.jsx)("div",{children:o.map((function(e,t){return Object(i.jsx)("span",{style:{fontWeight:e.highlight?900:400,backgroundColor:L.a[100]},children:e.text.slice(0,100)},t)}))})})),t));return Object(i.jsxs)(p.a.Fragment,{children:[Object(i.jsx)(b.b,{title:"Espace de travail"}),Ne,Object(i.jsx)(N.a,{variant:"h3",gutterBottom:!0,display:"inline",children:Object(i.jsx)(I.a,{container:!0,spacing:6,children:Object(i.jsx)(I.a,{item:!0,xs:8,lg:8,children:"tous"==G?"Cahier de consignes":"maintenance"==G?"Registre de maintenance":"\xc9tage"})})}),Object(i.jsx)(ge,{my:6}),Object(i.jsxs)(I.a,{container:!0,spacing:6,children:[Object(i.jsxs)(I.a,{item:!0,xs:12,lg:10,children:[Object(i.jsx)("form",{onSubmit:ve(Ie),children:Object(i.jsx)(j.a,{as:Object(i.jsx)(T.a,{multiline:!0,rows:4,autoFocus:!0,value:"",error:!!_e.TextField,helperText:null===(n=_e.TextField)||void 0===n?void 0:n.message,variant:"outlined",label:"Votre consigne",placeholder:"Ajouter votre consigne",fullWidth:!0}),name:"TextField",control:we,defaultValue:""})}),Object(i.jsxs)(Q.a,{fullWidth:!0,variant:"contained",onClick:ve(Ie),color:"primary",children:["Ajouter la consigne",Z]}),R,Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Fe,Object(i.jsx)("br",{}),null!==xe?Object(i.jsx)(K.a,{children:xe.content}):"",Se]}),Ae]})]})}}}]);
//# sourceMappingURL=30.bf906e3c.chunk.js.map